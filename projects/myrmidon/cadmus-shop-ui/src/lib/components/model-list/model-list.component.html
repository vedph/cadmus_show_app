<mat-card appearance="outlined">
  <mat-card-header>
    <mat-card-title>
      <mat-icon>shopping_bag</mat-icon>
      Models
    </mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <div id="container">
      <!-- filters -->
      <div id="filters" gdAlignRows.lt-md="center">
        <cadmus-model-filter></cadmus-model-filter>
      </div>

      <!-- list -->
      <div id="list" *ngIf="pagination$ | async as pagination">
        <mat-progress-bar
          *ngIf="loading$ | async"
          mode="indeterminate"
        ></mat-progress-bar>
        <table>
          <thead>
            <th></th>
            <th>id</th>
            <th>name</th>
            <th>project</th>
            <th>tags</th>
          </thead>
          <tbody>
            <tr *ngFor="let m of pagination.data">
              <td class="fit-width">
                <!-- view -->
                <button
                  type="button"
                  color="primary"
                  matTooltip="View model's details"
                  mat-icon-button
                  (click)="onViewModel(m)"
                >
                  <mat-icon>preview</mat-icon>
                </button>
                <!-- copy -->
                <button
                  type="button"
                  matTooltip="Copy the model's ID"
                  mat-icon-button
                  [cdkCopyToClipboard]="m.id"
                >
                  <mat-icon>content_copy</mat-icon>
                </button>
              </td>
              <td>
                <span class="m-id">{{ m.id }}</span>
              </td>
              <td>{{ m.name }}</td>
              <td>
                <span class="m-prj">{{ m.project }}</span>
              </td>
              <td>
                <span class="m-tag">{{ m.tags?.join("; ") }}</span>
              </td>
            </tr>
          </tbody>
        </table>

        <!-- paginator -->
        <div id="paginator" class="form-row">
          <button
            type="button"
            mat-icon-button
            color="warn"
            matTooltip="Clear items cache"
            (click)="clearCache()"
          >
            <mat-icon>autorenew</mat-icon>
          </button>
          <mat-paginator
            [length]="pagination.total || 0"
            [pageSize]="pagination.perPage || 20"
            [pageSizeOptions]="[2, 20, 50, 75, 100]"
            [pageIndex]="(pagination.currentPage || 1) - 1"
            [showFirstLastButtons]="true"
            (page)="pageChange($event)"
          ></mat-paginator>
        </div>
      </div>

      <!-- info -->
      <div id="info" *ngIf="model">
        <cadmus-part-info [model]="model"></cadmus-part-info>
      </div>
    </div>
  </mat-card-content>
</mat-card>
